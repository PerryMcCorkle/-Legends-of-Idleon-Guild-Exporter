<!doctype html>

<html lang="en">
<head>
  <title>Legends of Idleon Guild Exporter 1.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
<h3>This no longer works as of 1.40b and won't be updated</h3>
Other tools such as <a href="https://github.com/Corbeno/Idleon-Api-Downloader">Idleon Api Downloader</a> should be updated shortly. These instructions to manually get it should always work <a href=https://idleon-gp-tracking.vercel.app/instruction-old>Idleon GP Tracking</a><br><br><br>
<strike>Legends of Idleon Guild Exporter by Sans#2009<br>
Tested on Legends of Idleon 1.14 for Chrome and Firefox<br>
 <br>
WARNING: These instructions create a Bookmarklet to execute code in your browser.<br>
Make sure you understand any code before you execute it.<br>
<br>
First time setup: (Click a step to see screenshots)<br>

<p style="margin-left: 10px">

<details>
  <summary>1. If the bookmarks bar isn't showing, Press Ctrl+Shift+B to show it </summary>
  <br>If you can't see your bookmarks below the address bar<br>
  <img src="Setup 1a.png"><br>
  Press Ctrl+Shift+B to show them<br>
  <img src="Setup 1b.png"><br>
</details>

<details>
  <summary>2. Drag the "Export Guild" link below into the bookmarks bar</summary>
  <br>
  <img src="Setup 2a.png"><br>
  <img src="Setup 2b.png"><br>
  <img src="Setup 2c.png"><br>
</details></p>
<br>
To use:<br><p style="margin-left: 10px">
<details>
  <summary>1. Play a character</summary>
  <br>
  <img src="Use 1.png"><br>
</details>
<details>
  <summary>2. Click the "Export Guild" bookmark created in First time setup</summary>
  <br>
  <img src="Use 2.png"><br>
</details>
</p>
  <br>
  <a href="javascript:/* Legends of Idleon Guild Exporter by Sans#2009
 * Tested on Legends of Idleon 1.14 for Chrome and Firefox
 * 
 * WARNING: These instructions create a Bookmarklet to execute code in your browser.
 * Make sure you understand any code before you execute it.
 *
 * First time setup:
 * 	Chrome:
 * 		1. Create a bookmark
 * 		2. Right click bookmark, click edit
 *		3. Enter 'Export Guild' in Name
 *		4. Enter 'javascript:' without quotes in URL
 *		5. Paste this entire file after 'javascript:' in URL
 *		6. Click Save
 *	Firefox: 
 *		1. Create a bookmark
 * 		2. Right click bookmark, click properties
 *		3. Enter 'Export Guild' in Name
 *		4. Enter 'javascript:' without quotes in Location
 *		5. Paste this entire file after 'javascript:' in Location
 *		6. Click Save
 * 	
 * To use:
 *	1. Play a character
 *	2. Click the 'Export Guild' bookmark created in First time setup
 */
 
(function()
{
	function downloadCSV(csv, filename) 
	{
		var csvFile = new Blob([csv], { type: &quot;text/csv&quot; });
		
		var downloadLink = document.createElement(&quot;a&quot;);
		downloadLink.download = filename;
		downloadLink.href = window.URL.createObjectURL(csvFile);
		downloadLink.style.display = &quot;none&quot;;
		document.body.appendChild(downloadLink);
		downloadLink.click();
	}
	function buildCSV(guild)
	{
		var csv = &quot;&quot;;
		for (let i = 0; i != guild.length; ++i)
			csv += guild[i][0] + &quot;,&quot; + guild[i][4] + &quot;\n&quot;;
			
		return csv;
	}
	function isReady()
	{
		if (typeof xn == &quot;undefined&quot;)
		{
			alert(&quot;Legends of Idleon Guild Exporter:\nError: Guild is undefined.\nOpen the game and try again.&quot;);
			return false;
		}
		
		if (xn == null)
		{
			alert(&quot;Legends of Idleon Guild Exporter:\nError: Guild data not found.\nPlay a character and try again.&quot;);
			return false;
		}
		
		if (bn == null)
		{
			alert(&quot;Legends of Idleon Guild Exporter:\nError: Guild name not found.\nJoin or create a guild and try again.&quot;);
			return false;
		}
		
		return true;
	}
	if (isReady())
		downloadCSV(buildCSV(xn), bn.n + &quot; &quot; + new Date().toLocaleDateString() + &quot;.csv&quot;);
	
})();">Export Guild</a></strike>
</body>
</html>
